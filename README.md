# ุจูุช ุชููุฌุฑุงู ูุฅุฏุงุฑุฉ ุฑููุฒ ุงููุตุงุฏูุฉ ุงูุซูุงุฆูุฉ (ChatGPTPlus2FABot) - ูุณุฎุฉ ูุญุฏุซุฉ

## 1. ูุธุฑุฉ ุนุงูุฉ

ูุฐุง ุงูุจูุช ูุตูู ูุชูููุฏ ูุฅุฏุงุฑุฉ ุฑููุฒ ุงููุตุงุฏูุฉ ุงูุซูุงุฆูุฉ ุงููุณุชูุฏุฉ ุฅูู ุงูููุช (TOTP) ููุฌููุนุงุช ุชููุฌุฑุงู. **ูุนุชูุฏ ุงูุจูุช ุนูู ููุงู ุงููุณุคูู ุจุฅุฑุณุงู ุฑุณุงูุฉ ุฃูููุฉ** ุฅูู ุงููุฌููุนุฉ ุชุญุชูู ุนูู ุฒุฑ "ูุณุฎ ุงูุฑูุฒ". **ุนูุฏูุง ูุถุบุท ุฃู ูุณุชุฎุฏู ุนูู ูุฐุง ุงูุฒุฑุ ูููู ุงูุจูุช ุจุชูููุฏ ุฑูุฒ TOTP ุงูุญุงูู ูุงูุตุงูุญ ูู ุชูู ุงููุญุธุฉ** ูุฅุฑุณุงูู ูููุณุชุฎุฏู ุนุจุฑ ุฑุณุงูุฉ ุฎุงุตุฉุ ูุน ุชุชุจุน ุนุฏุฏ ูุญุงููุงุช ุงููุณุฎ ุงููุณููุญ ุจูุง ููู ูุณุชุฎุฏู.

**ููุงุญุธุฉ ูุงูุฉ:** ุจุณุจุจ ูููุฏ ุงูุจูุฆุฉ ุงูุชุดุบูููุฉุ ูุง ูููู ุงูุจูุช ุจุฅุฑุณุงู ุงูุฑุณุงุฆู ุจุดูู ุฏูุฑู ุชููุงุฆู. ูุฌุจ ุนูู ุงููุณุคูู ุฅุฑุณุงู ุงูุฑุณุงูุฉ ูุฏูููุง ุนูุฏ ุงูุญุงุฌุฉ ุจุงุณุชุฎุฏุงู ููุญุฉ ุงูุชุญูู.

ูููุฑ ุงูุจูุช ููุญุฉ ุชุญูู ุดุงููุฉ ูููุณุคูููู (`/admin`) ูุฅุฏุงุฑุฉ ุงููุฌููุนุงุชุ ุฃุณุฑุงุฑ TOTPุ ูุชุฑุงุช ุงูุชูุฑุงุฑ (ุงูุชู ุชุคุซุฑ ุนูู **ุนุฑุถ** ุงูุชูููุช ูู ุงูุฑุณุงูุฉ)ุ ุดูู ุงูุฑุณุงุฆูุ ูุญุงููุงุช ุงููุณุชุฎุฏูููุ ุฅุฏุงุฑุฉ ุงููุณุคูููู ุงูุขุฎุฑููุ ู**ุฅุฑุณุงู ุฑุณุงูุฉ ุทูุจ ุงูุฑูุฒ ูุฏูููุง**. 

## 2. ุงูุฅุนุฏุงุฏ ูุงูุชุดุบูู

### ุฃ. ุงููุชุทูุจุงุช:

*   Python 3.11 ุฃู ุฃุญุฏุซ.
*   ุงูุงุนุชูุงุฏูุงุช ุงููุฐููุฑุฉ ูู ููู `requirements.txt` (ุจูุง ูู ุฐูู `aiogram`, `pyotp`).

### ุจ. ุงูุชุซุจูุช:

1.  **ูุณุฎ ุงููููุงุช:**
    ุชุฃูุฏ ูู ูุฌูุฏ ุฌููุน ูููุงุช ุงููุดุฑูุน ูู ุงููุฌูุฏ `/home/ec2-user/projects/ChatGPTPlus2FABot` (ุฃู ุงููุณุงุฑ ุงูุฐู ุชูุถูู).
    ```bash
    # ูุซุงู: ุฅูุดุงุก ุงููุฌูุฏ ููุณุฎ ุงููููุงุช ุฅููู
    # mkdir /home/ec2-user/projects/ChatGPTPlus2FABot
    # cd /home/ec2-user/projects/ChatGPTPlus2FABot
    # <ุงูุณุฎ ูููุงุช ุงูุจูุช ุฅูู ููุง>
    ```
2.  **ุชุซุจูุช ุงูุงุนุชูุงุฏูุงุช:**
    ```bash
    cd /home/ec2-user/projects/ChatGPTPlus2FABot
    pip3 install -r requirements.txt
    ```

### ุฌ. ุงูุฅุนุฏุงุฏุงุช:

1.  **ุงูุชููู (Token):**
    *   **ูุงู:** ุชู ูุถุน ุงูุชููู ูุจุงุดุฑุฉ ูู ููู `bot.py` (`"8119053401:AAHuqgTkiq6M8rT9VSHYEnIl96BHt9lXIZM"`) ููููุฉ ุงูุชุฑุงุถูุฉ ุจูุงุกู ุนูู ุทูุจู. **ููุงุณุชุฎุฏุงู ุงููุนูู ูุงูุขููุ ููุตู ุจุดุฏุฉ** ุจุงุณุชุฎุฏุงู ูุชุบูุฑุงุช ุงูุจูุฆุฉ. ูู ุจุฅูุดุงุก ููู `.env` ูู ููุณ ูุฌูุฏ `bot.py` ูุถุน ููู:
        ```
        TELEGRAM_BOT_TOKEN="YOUR_ACTUAL_BOT_TOKEN"
        ```
        ูุงุณุชุจุฏู `"YOUR_ACTUAL_BOT_TOKEN"` ุจุงูุชููู ุงูุญูููู ุงูุฐู ุญุตูุช ุนููู ูู BotFather. ุณูููู ุงูููุฏ ุชููุงุฆููุง ุจูุฑุงุกุฉ ุงูุชููู ูู ูุฐุง ุงูููู ุฅุฐุง ูุงู ููุฌูุฏูุง.

2.  **ูุนุฑู ุงููุณุคูู ุงูุฃููู:**
    *   ูุชู ุชุญุฏูุฏ ูุนุฑู ุงููุณุคูู ุงูุฃููู ูู ููู `config.json` ุฏุงุฎู ูุงุฆูุฉ `admins`. ุชู ุชุนูููู ูุจุฏุฆููุง ุฅูู `764559466` ุญุณุจ ุทูุจู. ุชุฃูุฏ ูู ุชุนุฏููู ุฅูู ูุนุฑู ุงููุณุชุฎุฏู ุงูุฎุงุต ุจู ุฅุฐุง ูุฒู ุงูุฃูุฑ.
    *   ููููู ุฅุถุงูุฉ ุงููุฒูุฏ ูู ุงููุณุคูููู ูุงุญููุง ุนุจุฑ ููุญุฉ ุงูุชุญูู.
    ```json
    {
        "admins": [
            764559466 
            # ููููู ุฅุถุงูุฉ ูุนุฑูุงุช ูุณุคูููู ุขุฎุฑูู ููุง
        ],
        "default_attempts": 5 
    }
    ```
3.  **ุนุฏุฏ ุงููุญุงููุงุช ุงูุงูุชุฑุงุถู:**
    *   ูููู ุชุนุฏูู ุงูุนุฏุฏ ุงูุงูุชุฑุงุถู ููุญุงููุงุช ูุณุฎ ุงูุฑูุฒ (`default_attempts`) ูู `config.json`.

### ุฏ. ุงูุชุดุบูู:

1.  **ุงูุชุดุบูู ุงููุจุงุดุฑ (ููุงุฎุชุจุงุฑ):**
    ```bash
    cd /home/ec2-user/projects/ChatGPTPlus2FABot
    python3.11 bot.py
    ```
2.  **ุงูุชุดุบูู ุงููุณุชูุฑ (ููุตู ุจู ููุฅูุชุงุฌ):**
    *   ุงุณุชุฎุฏู ุฃุฏูุงุช ูุซู `systemd` ุฃู `supervisor` ุฃู `screen`/`tmux` ูุถูุงู ุชุดุบูู ุงูุจูุช ุจุดูู ุฏุงุฆู ูู ุงูุฎูููุฉ.
    *   **ูุซุงู ุจุงุณุชุฎุฏุงู `screen`:**
        ```bash
        screen -S 2fa_bot # ุฅูุดุงุก ุฌูุณุฉ screen ุฌุฏูุฏุฉ
        cd /home/ec2-user/projects/ChatGPTPlus2FABot
        python3.11 bot.py # ุชุดุบูู ุงูุจูุช ุฏุงุฎู ุงูุฌูุณุฉ
        # ุงุถุบุท Ctrl+A ุซู D ููุฎุฑูุฌ ูู ุงูุฌูุณุฉ ูุน ุฅุจูุงุฆูุง ุชุนูู
        # ููุนูุฏุฉ ููุฌูุณุฉ: screen -r 2fa_bot
        ```

## 3. ููุญุฉ ุชุญูู ุงููุณุคูู (`/admin`)

ูููู ูููุณุคูููู ุงููุณุฌููู ููุท ุงุณุชุฎุฏุงู ุงูุฃูุฑ `/admin` ูููุตูู ุฅูู ููุญุฉ ุงูุชุญูู.

*   **ุฅุฏุงุฑุฉ ุงููุฌููุนุงุช/ุงูุณุฑ (`โ๏ธ ุฅุฏุงุฑุฉ ุงููุฌููุนุงุช/ุงูุณุฑ`):**
    *   **ุฅุถุงูุฉ ูุฌููุนุฉ ุฌุฏูุฏุฉ:** ูุทูุจ ูุนุฑู ุงููุฌููุนุฉุ ุซู ุณุฑ TOTPุ ุซู ุงุณููุง ุงุฎุชูุงุฑููุง ูููุฌููุนุฉ.
    *   **ุชุนุฏูู ุณุฑ ูุฌููุนุฉ:** ุชุฎุชุงุฑ ุงููุฌููุนุฉ ูู ุงููุงุฆูุฉ ุซู ุชุฏุฎู ุงูุณุฑ ุงูุฌุฏูุฏ.
    *   **ุญุฐู ูุฌููุนุฉ:** ุชุฎุชุงุฑ ุงููุฌููุนุฉ ูู ุงููุงุฆูุฉ ูุชุคูุฏ ุงูุญุฐู. ุณูุคุฏู ูุฐุง ุฅูู ุญุฐู ุจูุงูุงุช ุงููุฌููุนุฉ ูุงููุณุชุฎุฏููู ุงููุฑุชุจุทูู ุจูุง.
*   **ุฅุฏุงุฑุฉ ูุชุฑุฉ ุงูุชูุฑุงุฑ (`โฐ ุฅุฏุงุฑุฉ ูุชุฑุฉ ุงูุชูุฑุงุฑ`):**
    *   ุชุฎุชุงุฑ ุงููุฌููุนุฉ ูู ุงููุงุฆูุฉ.
    *   ุชุฎุชุงุฑ ูุชุฑุฉ ุงูุชูุฑุงุฑ **ุงููุฑุบูุจุฉ** ูู ุงูุฎูุงุฑุงุช ุงููุชุงุญุฉ (1ุฏุ 5ุฏุ ...ุ 24ุณ). **ููุงุญุธุฉ:** ูุฐุง ุงูุฅุนุฏุงุฏ ูุคุซุฑ ููุท ุนูู **ุงููุต ุงููุนุฑูุถ** ูู ุงูุฑุณุงูุฉ (ูุซู "Next code in: ...") ููุง ูููู ุจุฌุฏููุฉ ุฅุฑุณุงู ุชููุงุฆู.
    *   **ุงูุชุฑุงุถููุง:** ุนูุฏ ุฅุถุงูุฉ ูุฌููุนุฉ ุฌุฏูุฏุฉุ ูุชู ุชุนููู ูุชุฑุฉ ุงูุนุฑุถ ุนูู 10 ุฏูุงุฆู.
*   **ุฅุฏุงุฑุฉ ุดูู/ุชูููุช ุงูุฑุณุงูุฉ (`๐จ ุฅุฏุงุฑุฉ ุดูู/ุชูููุช ุงูุฑุณุงูุฉ`):**
    *   ุชุฎุชุงุฑ ุงููุฌููุนุฉ ูู ุงููุงุฆูุฉ.
    *   ุชุฎุชุงุฑ ุฃุญุฏ ุฃุดูุงู ุงูุฑุณุงุฆู ุงูุซูุงุซุฉ ุงููุชุงุญุฉ.
    *   ุชุฎุชุงุฑ ุงูููุทูุฉ ุงูุฒูููุฉ ูุนุฑุถ ุงูููุช ูู ุงูุฑุณุงูุฉ (GMTุ ุบุฒุฉุ UTC).
*   **ุฅุฏุงุฑุฉ ูุญุงููุงุช ุงููุณุชุฎุฏููู (`๐ข ุฅุฏุงุฑุฉ ูุญุงููุงุช ุงููุณุชุฎุฏููู`):**
    *   ุชุฎุชุงุฑ ุงููุฌููุนุฉ ูู ุงููุงุฆูุฉ.
    *   ุชุฎุชุงุฑ ุงููุณุชุฎุฏู ูู ุงููุงุฆูุฉ (ูุนุฑุถ ุงูุงุณู ูุงููุนุฑู ูุงูุญุงูุฉ ุงูุญุงููุฉ ูููุญุงููุงุช ุฃู ุงูุญุธุฑ).
    *   ุชุฎุชุงุฑ ุงูุฅุฌุฑุงุก:
        *   **ุฅุถุงูุฉ ูุญุงููุงุช:** ุชุฏุฎู ุนุฏุฏ ุงููุญุงููุงุช ุงููุฑุงุฏ ุฅุถุงูุชูุง.
        *   **ุญุฐู ูุญุงููุงุช:** ุชุฏุฎู ุนุฏุฏ ุงููุญุงููุงุช ุงููุฑุงุฏ ุญุฐููุง (ูู ููู ุนู ุตูุฑ).
        *   **ุญุธุฑ ุงููุณุชุฎุฏู / ุฅูุบุงุก ุญุธุฑ ุงููุณุชุฎุฏู:** ุชุจุฏูู ุญุงูุฉ ุงูุญุธุฑ ูููุณุชุฎุฏู ูู ูุฐู ุงููุฌููุนุฉ.
*   **ุฅุฏุงุฑุฉ ุงููุณุคูููู (`๐ ุฅุฏุงุฑุฉ ุงููุณุคูููู`):**
    *   **ุฅุถุงูุฉ ูุณุคูู ุฌุฏูุฏ:** ุชุฏุฎู ุงููุนุฑู ุงูุฑููู ูููุณุคูู ุงูุฌุฏูุฏ.
    *   **ุฅุฒุงูุฉ ูุณุคูู:** ุชุฎุชุงุฑ ุงููุณุคูู ูู ุงููุงุฆูุฉ ูุชุคูุฏ ุงูุฅุฒุงูุฉ (ูุง ูููู ุฅุฒุงูุฉ ุงููุณุคูู ุงูุฃุฎูุฑ ุฃู ููุณู).
*   **ุฅุฑุณุงู ุฑุณุงูุฉ ุงูุฑูุฒ ูููุฌููุนุฉ (`โ๏ธ ุฅุฑุณุงู ุฑุณุงูุฉ ุงูุฑูุฒ ูููุฌููุนุฉ`):**
    *   **ูุงู:** ุงุณุชุฎุฏู ูุฐุง ุงูุฎูุงุฑ ูุฅุฑุณุงู ุงูุฑุณุงูุฉ ุงูุชู ุชุญุชูู ุนูู ุฒุฑ "Copy Code" ุฅูู ุงููุฌููุนุฉ ุงููุฎุชุงุฑุฉ **ูุฏูููุง**. ูุฌุจ ุฅุฑุณุงู ูุฐู ุงูุฑุณุงูุฉ ุญุชู ูุชููู ุงููุณุชุฎุฏููู ูู ุทูุจ ุงูุฑููุฒ.

## 4. ุงุณุชุฎุฏุงู ุงููุณุชุฎุฏููู (ุฒุฑ "Copy Code")

*   ุนูุฏูุง ูุฑุณู ุงููุณุคูู ุงูุฑุณุงูุฉ ุงูุฃูููุฉ ุฅูู ุงููุฌููุนุฉุ ูููู ูุฃู ุนุถู ุงูุถุบุท ุนูู ุฒุฑ `๐ Copy Code`.
*   **ุงูุชุญูู:** ูุชุญูู ุงูุจูุช ููุง ุฅุฐุง ูุงู ุงููุณุชุฎุฏู ูุญุธูุฑูุง ุฃู ูุฏ ุงุณุชููุฏ ูุญุงููุงุชู ุงููุณููุญุฉ.
*   **ุงูุชูููุฏ ูุงูุฅุฑุณุงู:** ุฅุฐุง ูุงู ูุณููุญูุงุ ูููู ุงูุจูุช **ุจุชูููุฏ ุฑูุฒ TOTP ุงูุญุงูู ูุงูุตุงูุญ ูู ุชูู ุงููุญุธุฉ** ูุฅุฑุณุงูู ูููุณุชุฎุฏู ูู **ุฑุณุงูุฉ ุฎุงุตุฉ** ุชุชุถูู:
    *   ุงูุฑูุฒ ุงููุงุจู ูููุณุฎ.
    *   ุชุญุฐูุฑ ุจุฃู ุงูุฑูุฒ ุตุงูุญ ููุฏุฉ ูุตูุฑุฉ (ุนุงุฏุฉ 30 ุซุงููุฉ) ูุน ุนุฑุถ ุงูููุช ุงููุชุจูู ุงูุชูุฑูุจู.
    *   ุนุฏุฏ ุงููุญุงููุงุช ุงููุชุจููุฉ ูููุณุชุฎุฏู.
*   **ุงูุฑูุถ:** ุฅุฐุง ูุงู ุงููุณุชุฎุฏู ูุญุธูุฑูุง ุฃู ุงุณุชููุฏ ูุญุงููุงุชูุ ูุชููู ุฑุณุงูุฉ ุฎุงุตุฉ ุชูุถุญ ุฐูู.
*   **ุฎุตู ุงููุญุงููุงุช:** ูุชู ุฎุตู ูุญุงููุฉ ูุงุญุฏุฉ ูู ูู ูุฑุฉ ููุฌุญ ูููุง ุงููุณุชุฎุฏู ูู ุงูุญุตูู ุนูู ุงูุฑูุฒ.

## 5. ูููู ุงููููุงุช

```
ChatGPTPlus2FABot/
โโโ bot.py             # ุงูููู ุงูุฑุฆูุณู ูุชุดุบูู ุงูุจูุช ูุฑุจุท ุงูููููุงุช
โโโ requirements.txt   # ุงูุงุนุชูุงุฏูุงุช ุงููุทููุจุฉ
โโโ config.json        # ุฅุนุฏุงุฏุงุช ุงูุจูุช (ุงููุณุคููููุ ุงููุญุงููุงุช ุงูุงูุชุฑุงุถูุฉ)
โโโ groups.json        # ุจูุงูุงุช ุงููุฌููุนุงุช (ุงููุนุฑูุ ุงูุณุฑุ ุงูุงุณูุ ุงููุงุตูุ ุงูุดููุ ุงูุชูููุช)
โโโ users.json         # ุจูุงูุงุช ุงููุณุชุฎุฏููู ููู ูุฌููุนุฉ (ุงููุญุงููุงุชุ ุงูุญุธุฑ)
โโโ utils.py           # ูุธุงุฆู ูุณุงุนุฏุฉ (ุชุญููู/ุญูุธ JSONุ ุชูููุฏ TOTPุ ุชูุณูู ุงูููุชุ ุฅุฏุงุฑุฉ ุงููุญุงููุงุช)
โโโ handlers/          # ูุฌูุฏ ูุญุชูู ุนูู ูุนุงูุฌุงุช ุงูุฃูุงูุฑ ูุงูุงุณุชุนูุงูุงุช
โ   โโโ __init__.py    # ูุฌุนู ุงููุฌูุฏ ุญุฒูุฉ ุจุงูุซูู
โ   โโโ admin.py       # ุชุนุฑูู ุญุงูุงุช FSM ูููุญุฉ ุงูุชุญูู ูููุทู ุงุณุชูุจุงู ูุฏุฎูุงุช ุงููุณุคูู
โ   โโโ callback_query.py # ูุนุงูุฌุฉ ุถุบุทุงุช ุงูุฃุฒุฑุงุฑ (ููุญุฉ ุงูุชุญูู ูุฒุฑ ูุณุฎ ุงูุฑูุฒ)
โ   โโโ commands.py    # ูุนุงูุฌุฉ ุงูุฃูุงูุฑ ูุซู /start ู /admin
โโโ .env               # (ุงุฎุชูุงุฑู ูููุตู ุจู) ูุชุฎุฒูู ุชููู ุงูุจูุช
```

## 6. ููุงุญุธุงุช ูุงูุฉ

*   **ุงุณู ุงูุจูุช:** ุชู ุงุณุชุฎุฏุงู `ChatGPTPlus2FABot` ูู ุงูููุฏ ูุงูุฑุณุงุฆู ููุง ูู ูุทููุจ.
*   **ุงูุฃูุงู:** ุงุณุชุฎุฏุงู ูุชุบูุฑุงุช ุงูุจูุฆุฉ (ููู `.env`) ูุชููู ุงูุจูุช ูู ุงูููุงุฑุณุฉ ุงูุฃูุซุฑ ุฃูุงููุง.
*   **ุงูุฃุฎุทุงุก:** ูุณุฌู ุงูุจูุช ุงูุฃุฎุทุงุก ูุงูุนูููุงุช ุงููุงูุฉ ูู ุงูุทุฑููุฉ (console). ุฑุงูุจ ุงูุณุฌูุงุช ูุชุดุฎูุต ุฃู ูุดุงูู.
*   **ุตูุงุญูุงุช ุงูุจูุช:** ุชุฃูุฏ ูู ุฃู ุงูุจูุช ูุฏูู ุงูุตูุงุญูุงุช ุงููุงุฒูุฉ ูู ุงููุฌููุนุงุช ุงูุชู ูุถุงู ุฅูููุง (ูุฑุงุกุฉ ุงูุฑุณุงุฆูุ ุฅุฑุณุงู ุงูุฑุณุงุฆู).
*   **ุชูุณูู Markdown:** ูุณุชุฎุฏู ุงูุจูุช ุชูุณูู MarkdownV2 ูู ุงูุฑุณุงุฆู. ุชู ุงุชุฎุงุฐ ุงูุงุญุชูุงุทุงุช ุงููุงุฒูุฉ ููุชุนุงูู ูุน ุงูุฃุณูุงุก ูุงููุฏุฎูุงุชุ ูููู ูุฏ ุชุธูุฑ ูุดุงูู ุฅุฐุง ุงุญุชูุช ุนูู ุฑููุฒ ุฎุงุตุฉ ุฌุฏูุง.
*   **ุงูููุงุทู ุงูุฒูููุฉ:** ูุชู ุงูุชุนุงูู ูุน ุงูููุงุทู ุงูุฒูููุฉ ุจุงุณุชุฎุฏุงู ููุชุจุฉ `pytz`. ุชุฃูุฏ ูู ุฃู ุงูุฎุงุฏู ุงูุฐู ูุนูู ุนููู ุงูุจูุช ูุฏูู ูุนูููุงุช ุงูููุงุทู ุงูุฒูููุฉ ุงูุตุญูุญุฉ.
*   **ูุง ููุฌุฏ ุฅุฑุณุงู ุฏูุฑู:** ุชุฐูุฑ ุฃู ุงูุจูุช **ูุง ูุฑุณู** ุงูุฑุณุงุฆู ุจุดูู ุฏูุฑู ุชููุงุฆู. ูุฌุจ ุนูู ุงููุณุคูู ุงุณุชุฎุฏุงู ุฎูุงุฑ "ุฅุฑุณุงู ุฑุณุงูุฉ ุงูุฑูุฒ ูููุฌููุนุฉ" ูู ููุญุฉ ุงูุชุญูู.

